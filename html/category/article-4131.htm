<!DOCTYPE html>
<html lang="zh-CN">

<head>
        <link rel="canonical" href="https://myanmaraddress.github.io/html/category/article-4131.htm" />
    <title>linux单个IP地址绑定多个端口详解 - Myanmar Address</title>
        <link rel="icon" href="/assets/addons/xcblog/img/myanmaraddress/favicon.ico" type="image/x-icon"/>
    <link href="/assets/addons/xcblog/css/myanmaraddress/bootstrap.css" rel="stylesheet" type="text/css" media="all">
    <!--theme-style-->
    <link href="/assets/addons/xcblog/css/myanmaraddress/style.css" rel="stylesheet" type="text/css" media="all">
    <!--//theme-style-->
    <link href="/assets/addons/xcblog/css/myanmaraddress/popuo-box.css" rel="stylesheet" type="text/css" media="all" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- script -->
    <script src="/assets/addons/xcblog/js/frontend/myanmaraddress/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/addons/xcblog/js/frontend/myanmaraddress/move-top.js"></script>
    <script type="text/javascript" src="/assets/addons/xcblog/js/frontend/myanmaraddress/easing.js"></script>
    <link type="text/css" rel="stylesheet" href="/assets/addons/xcblog/css/myanmaraddress/jquery.mmenu.all.css" />
    <script type="text/javascript">
    $(window).load(function() {
        $('div.description').each(function() {
            $(this).css('display', 'block');
        });

        $('div.content-top-grid').hover(function() {
            $(this).children('.description').stop().fadeTo(500, 1);
        }, function() {
            $(this).children('.description').stop().fadeTo(500, 0);
        });

    });
    </script>
    <script type="text/javascript" src="/assets/addons/xcblog/js/frontend/myanmaraddress/jquery.mmenu.js"></script>
    <script type="text/javascript">
    //	The menu on the left
    $(function() {
        $('nav#menu-left').mmenu();
    });
    </script>
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e4890e777e20237a4f5a0c3a6a01049c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body>
    <!--header-->
    <div class="header">
        <a class="navicon" href="#menu-left"> </a>
        <div class="container">
            <div class="header-matter">
                <h1>linux单个IP地址绑定多个端口详解</h1>
                <p>
                    <a href="/">首页</a> / <a href="/html/category/">文章分类</a> / 正文
                </p>
            </div>
        </div>
                <nav id="menu-left">
            <ul>
                                <li><a href="/">首页</a></li>
                                <li><a href="/html/category/">文章分类</a></li>
                                <li>
                    <a href="#">关于</a>
                </li>
                <li>
                    <a href="#">联系</a>
                </li>
            </ul>
        </nav>
        <script type="text/javascript">
        jQuery(document).ready(function($) {
            $(".scroll").click(function(event) {
                event.preventDefault();
                $('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
            });
        });
        </script>
    </div>
    <div class="clearfix"> </div>
    <!--//header-->
    <!--content-->
    <div class="content">
        <!--our-news-->
        <div class="our-news" id="news">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                        <div class="news">
                              				  				  				<div id="content_views" class="htmledit_views"> <p id="main-toc"><strong>目录</strong></p> <p id="-toc" style="margin-left:40px;"> <p id="1.%E5%85%88%E5%88%9B%E5%BB%BA%E7%94%A8%E4%BA%8E%E5%AD%98%E6%94%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9-toc" style="margin-left:40px;"><a href="#1.%E5%85%88%E5%88%9B%E5%BB%BA%E7%94%A8%E4%BA%8E%E5%AD%98%E6%94%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9" rel="nofollow">1.先创建用于存放数据的网站目录，并添加网站首页内容</a></p> <p style="margin-left:40px;"><a href="#%C2%A02.%E4%BF%AE%E6%94%B9httpd%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF" rel="nofollow">2.修改httpd服务的配置文件，添加监听端口信息</a></p> <p id="3.%E4%BF%AE%E6%94%B9httpd%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AF-toc" style="margin-left:40px;"><a href="#3.%E4%BF%AE%E6%94%B9httpd%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AF" rel="nofollow">3.修改httpd服务的配置文件，添加网站目录信息</a></p> <p id="%C2%A04.%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%AB%99%E7%9A%84Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87-toc" style="margin-left:40px;"><a href="#%C2%A04.%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%AB%99%E7%9A%84Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87" rel="nofollow">4.设置自定义网站的Selinux安全上下文</a></p> <p id="5.%E6%9B%B4%E6%96%B0Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%8C%E4%BD%BF%E5%85%B6%E7%AB%8B%E5%8D%B3%E7%94%9F%E6%95%88-toc" style="margin-left:40px;"><a href="#5.%E6%9B%B4%E6%96%B0Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%8C%E4%BD%BF%E5%85%B6%E7%AB%8B%E5%8D%B3%E7%94%9F%E6%95%88" rel="nofollow">5.更新Selinux安全上下文，使其立即生效</a></p> <p id="%C2%A06.%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9F-toc" style="margin-left:40px;"><a href="#%C2%A06.%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9F" rel="nofollow">6.查看端口是否添加成功</a></p> <p id="7.%E6%B7%BB%E5%8A%A0%E7%AB%AF%E5%8F%A3-toc" style="margin-left:40px;"><a href="#7.%E6%B7%BB%E5%8A%A0%E7%AB%AF%E5%8F%A3" rel="nofollow">7.添加端口</a></p> <p id="%C2%A08.%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8httpd%E6%9C%8D%E5%8A%A1%E5%B9%B6%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3-toc" style="margin-left:40px;"><a href="#%C2%A08.%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8httpd%E6%9C%8D%E5%8A%A1%E5%B9%B6%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3" rel="nofollow">8.重新启动httpd服务并查看端口</a></p> <p id="9.%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99-toc" style="margin-left:40px;"><a href="#9.%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99" rel="nofollow">9.使用端口访问网站</a></p> <hr id="hr-toc"/> <h2 id="1.%E5%85%88%E5%88%9B%E5%BB%BA%E7%94%A8%E4%BA%8E%E5%AD%98%E6%94%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9"><strong><span style="color:#0d0016;">1.先创建用于存放数据的网站目录，并添加网站首页内容</span></strong></h2> <pre><code>mkdir -p /home/port/6666</code></pre> <pre><code>mkdir -p /home/port/7777</code></pre> <pre><code>mkdir -p /home/port/8888</code></pre> <pre><code>echo "我的网站端口是 6666" &gt; /home/port/6666/index.html</code></pre> <pre><code>echo "我的网站端口是 7777" &gt; /home/port/7777/index.html</code></pre> <pre><code>echo "我的网站端口是 8888" &gt; /home/port/8888/index.html</code></pre> <p><img fetchpriority="high" decoding="async" alt="" height="116" src="http://img.555519.xyz/uploads/20221105/1bdcb80a4de8be3396d5464cd56b27c9.jpg"></p> <h2 id="%C2%A02.%E4%BF%AE%E6%94%B9httpd%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF"><strong><span style="color:#0d0016;">&nbsp;2.修改httpd服务的配置文件，添加监听端口信息</span></strong></h2> <pre><code>vim /etc/httpd/conf/httpd.conf</code></pre> <p><img decoding="async" alt="" height="192" src="http://img.555519.xyz/uploads/20221105/f47a311a658ecbd1d08a36ec28f6592c.jpg"></p> <h2 id="3.%E4%BF%AE%E6%94%B9httpd%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AF"><strong><span style="color:#0d0016;">3.修改httpd服务的配置文件，添加网站目录信息</span></strong></h2> <p><span style="color:#0d0016;"><strong>将下列内容写到配置文件中(</strong></span><span style="color:#fe2c24;"><strong>IP地址改为自己的IP地址</strong></span><span style="color:#0d0016;"><strong>)</strong></span></p> <pre><code>&lt;VirtualHost 192.168.20.73:6666&gt;     DocumentRoot /home/port/6666     ServerName www.aab.com         &lt;Directory "/home/port/6666"&gt;                  AllowOverride None                  Require all granted          &lt;/Directory&gt; &lt;/VirtualHost&gt; &lt;VirtualHost 192.168.20.73:7777&gt;     DocumentRoot /home/port/7777     ServerName www.aab.com         &lt;Directory "/home/port/7777"&gt;                  AllowOverride None                  Require all granted          &lt;/Directory&gt; &lt;/VirtualHost&gt; &lt;VirtualHost 192.168.20.73:8888&gt;     DocumentRoot /home/port/8888     ServerName www.aab.com         &lt;Directory "/home/port/8888"&gt;                  AllowOverride None                  Require all granted          &lt;/Directory&gt; &lt;/VirtualHost&gt;</code></pre> <p><img decoding="async" alt="" height="519" src="http://img.555519.xyz/uploads/20221105/20c48210182310ab98d938dbd56b13a0.jpg"></p> <h2 id="%C2%A04.%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%AB%99%E7%9A%84Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span style="color:#0d0016;"><strong>&nbsp;4.设置自定义网站的Selinux安全上下文</strong></span></h2> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/6666</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/6666/*</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/7777</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/7777/*</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/8888</code></pre> <pre><code>semanage fcontext -a -t httpd_sys_content_t /home/port/8888/*</code></pre> <p><img loading="lazy" decoding="async" alt="" height="135" src="http://img.555519.xyz/uploads/20221105/8674388f7ed59f0da79c50d61c48567a.jpg"></p> <h2 id="5.%E6%9B%B4%E6%96%B0Selinux%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%8C%E4%BD%BF%E5%85%B6%E7%AB%8B%E5%8D%B3%E7%94%9F%E6%95%88"><strong><span style="color:#0d0016;">5.更新Selinux安全上下文，使其立即生效</span></strong></h2> <pre><code>restorecon -Rv /home/port</code></pre> <p><img loading="lazy" decoding="async" alt="" height="286" src="http://img.555519.xyz/uploads/20221105/89e5e67de3f84af26146b1ba9677ab90.jpg"></p> <h2 id="%C2%A06.%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9F"><strong>6</strong>.<strong><span style="color:#0d0016;">查看端口是否添加成功</span></strong></h2> <pre><code>semanage port -l | grep http</code></pre> <p><strong><span style="color:#fe2c24;">注：如果提示没有semanage命令，则需要安装semanage命令</span></strong></p> <pre><code>yum install semange</code></pre> <p><img loading="lazy" decoding="async" alt="" height="120" src="http://img.555519.xyz/uploads/20221105/6fc8400f41cfbdef6e5fe27406493273.jpg"></p> <p><strong><span style="color:#0d0016;">在这里我们并没有看到刚才添加的端口，所以我们要将我们刚才添加的端口手动添加进来</span></strong></p> <h2 id="7.%E6%B7%BB%E5%8A%A0%E7%AB%AF%E5%8F%A3"><strong><span style="color:#0d0016;">7.添加端口</span></strong></h2> <pre><code>semanage port -a -t http_port_t -p tcp 6666</code></pre> <pre><code>semanage port -a -t http_port_t -p tcp 7777</code></pre> <pre><code>semanage port -a -t http_port_t -p tcp 8888</code></pre> <p><img loading="lazy" decoding="async" alt="" height="63" src="http://img.555519.xyz/uploads/20221105/b0199c6f9ac44c659ef3bc823b366f64.jpg"></p> <h2 id="%C2%A08.%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8httpd%E6%9C%8D%E5%8A%A1%E5%B9%B6%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3"><strong><span style="color:#0d0016;">8.重新启动httpd服务并查看端口</span></strong></h2> <pre><code>systemctl restart httpd</code></pre> <pre><code>semanage port -l | grep http</code></pre> <p><img loading="lazy" decoding="async" alt="" height="159" src="http://img.555519.xyz/uploads/20221105/6dd2a0f397f19f0718a84b502065889b.jpg"></p> <p><span style="color:#0d0016;"><strong>&nbsp;可以看到，刚才的端口已经添加进来了</strong></span></p> <h2 id="9.%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99"><span style="color:#0d0016;"><strong>9.使用端口访问网站</strong></span></h2> <p><img loading="lazy" decoding="async" alt="" height="137" src="http://img.555519.xyz/uploads/20221105/b35a5adb3b532ecb5fb7e5d9ac81d0d2.jpg"></p> <p><img loading="lazy" decoding="async" alt="" height="127" src="http://img.555519.xyz/uploads/20221105/55f583046fff98b89537671b365dc74a.jpg"></p> </div> 			                        </div>

                        <div class="col-md-12 mt-5">
                                                        <p>上一个：<a href="/html/category/article-4104.htm">vue路由守卫，限制前端页面访问权限</a></p>
                                                        <p>下一个：<a href="/html/category/article-4132.htm">LeetCode 5436.一维数组的动态和(C++)</a></p>
                                                    </div>

                                                <div class="panel panel-default mt-5">
                            <div class="panel-heading">
                                <h3 class="m-0">推荐文章</h3>
                            </div>
                            <div class="panel-body">
                                <ul class="p-0 x-0">
                                                                        <li class="py-2"><a href="/html/category/article-1315.htm">关于对称算法中数据的填充模式</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1291.htm">Springcloud通过maven打包包含公共common模块的项目</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1272.htm">FreeRTOS实时操作系统之可视化追踪调试_操作系统</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1263.htm">chrome浏览器隐藏滚动条</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1220.htm">request和response——请求响应对象</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1152.htm">什么是 Spring Profiles？</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1146.htm">查看一个VUE项目的版本</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1134.htm">RPC及Dubbo和ZooKeeper的安装</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1115.htm">数据库事务的四大特性和四个隔离级别</a></li>
                                                                        <li class="py-2"><a href="/html/category/article-1084.htm">linux 硬盘满了如何处理</a></li>
                                                                    </ul>
                            </div>
                        </div>
                                            </div>
                    <div class="col-md-3">
                    	<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/html/category/article-2832.htm" title="pytorch 自动构建任意层的深度神经网络(DNN)">pytorch 自动构建任意层的深度神经网络(DNN)</a></li>
                        <li class="py-2"><a href="/html/category/article-2248.htm" title="vue 详情页返回列表，过滤查询条件保留">vue 详情页返回列表，过滤查询条件保留</a></li>
                        <li class="py-2"><a href="/html/category/article-1637.htm" title="Java基础之浅谈异常与了解断言">Java基础之浅谈异常与了解断言</a></li>
                        <li class="py-2"><a href="/html/category/article-4075.htm" title="Java中的公平锁和非公平锁实现详解">Java中的公平锁和非公平锁实现详解</a></li>
                        <li class="py-2"><a href="/html/category/article-1359.htm" title="python 数据加载工作">python 数据加载工作</a></li>
                        <li class="py-2"><a href="/html/category/article-1305.htm" title="Kafka delivery保证(kafka消息投递保证)">Kafka delivery保证(kafka消息投递保证)</a></li>
                        <li class="py-2"><a href="/html/category/article-3431.htm" title="Jackson 枚举序列化/反序列化">Jackson 枚举序列化/反序列化</a></li>
                        <li class="py-2"><a href="/html/category/article-1317.htm" title="JSON  传输数据出现415错误 Content type &#8216;application/xml;charset=UTF-8&#8217; not supported">JSON  传输数据出现415错误 Content type &#8216;application/xml;charset=UTF-8&#8217; not supported</a></li>
                        <li class="py-2"><a href="/html/category/article-3737.htm" title="2.使用httpclient发起post请求">2.使用httpclient发起post请求</a></li>
                        <li class="py-2"><a href="/html/category/article-4103.htm" title="在Vue项目里使用element ui在input框上使用v-model.trim导致输入空格失效">在Vue项目里使用element ui在input框上使用v-model.trim导致输入空格失效</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">4</span> <a href="/html/date/2024-07/" title="2024-07 归档">2024-07</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-06/" title="2024-06 归档">2024-06</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-05/" title="2024-05 归档">2024-05</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-04/" title="2024-04 归档">2024-04</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-03/" title="2024-03 归档">2024-03</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">50</span> <a href="/html/date/2024-02/" title="2024-02 归档">2024-02</a></h4>
            </li>
                    </ul>
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--//content-->
        <!--footer-->
    <div class="footer">
        <div class="container">
            <p>
                Myanmar Address 版权所有
                <br />
                Powered by WordPress
            </p>
        </div>
    </div>
    <script>
    $(function() {
        $('.js_to').click(function(){
            var url = $(this).data('url');
            var code = $(this).data('code');
            url += code;

            window.open(url);
        })
    });
    </script>
</body>

</html>